<!-- src/app/sale-item-form/sale-item-form.component.html -->

<div class="card mb-3 shadow-sm">
    <div class="card-body">
        <div class="row g-3 align-items-end">
            <!-- Produto -->
            <div class="col-md-4">
                <label class="form-label" for="product-{{ index }}">Produto</label>
                <select id="product-{{ index }}" class="form-select" [value]="item.productId"
                    (change)="onProductChange($event)">
                    <option value="">Selecione</option>
                    <option *ngFor="let p of productsService.products()" [value]="p.id">
                        {{ p.name }}
                    </option>
                </select>
            </div>

            <!-- Quantidade -->
            <div class="col-md-2">
                <label class="form-label" for="quantity-{{ index }}">Quantidade</label>
                <input id="quantity-{{ index }}" type="number" class="form-control" [value]="item.quantity" min="1"
                    (input)="onQuantityChange($event)" />
            </div>

            <!-- Preço Unitário -->
            <div class="col-md-2">
                <label class="form-label" for="unitPrice-{{ index }}">Preço Unitário</label>
                <input id="unitPrice-{{ index }}" type="text" class="form-control"
                    [value]="item.unitPrice | currency:'BRL':'symbol':'1.2-2'" readonly />
            </div>

            <!-- Desconto -->
            <div class="col-md-2">
                <label class="form-label" for="discount-{{ index }}">Desconto</label>
                <div id="discount-{{ index }}" class="form-control bg-light text-muted">
                    {{ item.discount | currency:'BRL':'symbol':'1.2-2' }}
                </div>
            </div>

            <!-- Total do Item -->
            <div class="col-md-2">
                <label class="form-label" for="total-{{ index }}">Total</label>
                <div id="total-{{ index }}" class="form-control bg-light fw-bold">
                    {{ item.totalItemAmount | currency:'BRL':'symbol':'1.2-2' }}
                </div>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col text-end">
                <button class="btn btn-outline-danger btn-sm" (click)="onRemove()"
                    [attr.aria-label]="'Remover item ' + (index + 1)">
                    <i class="bi bi-trash"></i> Remover
                </button>
            </div>
        </div>
    </div>
</div>
  